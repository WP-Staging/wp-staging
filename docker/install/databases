#!/bin/bash
SQL=$(cat << EOF
CREATE DATABASE IF NOT EXISTS $MYSQL_DATABASE_SINGLE;
CREATE DATABASE IF NOT EXISTS $MYSQL_DATABASE_SINGLE_TESTS;
CREATE DATABASE IF NOT EXISTS $MYSQL_DATABASE_MULTI;
CREATE DATABASE IF NOT EXISTS $MYSQL_DATABASE_MULTI_TESTS;
CREATE DATABASE IF NOT EXISTS $MYSQL_DATABASE_WPLOADER_TESTS;
CREATE DATABASE IF NOT EXISTS $MYSQL_DATABASE_EXTERNAL;

GRANT ALL PRIVILEGES ON $MYSQL_DATABASE_SINGLE.* TO '$MYSQL_USER'@'%';
GRANT ALL PRIVILEGES ON $MYSQL_DATABASE_SINGLE_TESTS.* TO '$MYSQL_USER'@'%';
GRANT ALL PRIVILEGES ON $MYSQL_DATABASE_MULTI.* TO '$MYSQL_USER'@'%';
GRANT ALL PRIVILEGES ON $MYSQL_DATABASE_MULTI_TESTS.* TO '$MYSQL_USER'@'%';
GRANT ALL PRIVILEGES ON $MYSQL_DATABASE_WPLOADER_TESTS.* TO '$MYSQL_USER'@'%';
GRANT ALL PRIVILEGES ON $MYSQL_DATABASE_EXTERNAL.* TO '$MYSQL_USER'@'%';

SHOW DATABASES;
EOF
);

mysql --user=root --password="$MYSQL_ROOT_PASSWORD" --host=database --execute="$SQL"
